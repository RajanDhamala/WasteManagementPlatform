import{r as a,A as f,a0 as F,a4 as g,j as e,C as r,L as h,b as L}from"./index-3_z3CT1Q.js";import{R as S,L as D}from"./react-confetti-DdT8qXWu.js";import{L as A}from"./leaf-CCg0J-Ud.js";import{M as E}from"./mail-BZSy2IOE.js";import{L as B}from"./loader-circle-BqqjAk9M.js";const q=()=>{const[n,y]=a.useState(""),[i,j]=a.useState(""),[d,o]=a.useState(""),[u,l]=a.useState(!1),[b,v]=a.useState(!1),c=f(s=>s.setAlert),w=F(),N=f(s=>s.setCurrentUser);a.useEffect(()=>{const s=g.get("CurrentUser");s?console.log("User:",s):console.log("No user found in cookies")},[]);const C=async s=>{var m,x;if(s.preventDefault(),l(!0),o(""),!n||!i){o("Please fill in all fields."),l(!1);return}try{const t=await L.post("http://localhost:8000/user/login",{email:n,password:i},{withCredentials:!0});console.log(t.data),t.data.statusCode=="200"?(console.log("Login Successful:",t.data),N(t.data.data),g.set("CurrentUser",JSON.stringify(t.data.data),{expires:7}),v(!0),c({title:"Login Successful",message:"You are now logged in.",type:"success"}),setTimeout(()=>{w("/")},2e3)):(o(t.data.message||"Login failed"),c({title:"Login Failed",message:t.data.message||"Login failed",type:"error"}))}catch(t){console.error("Login error:",t);const p=((x=(m=t.response)==null?void 0:m.data)==null?void 0:x.message)||"Invalid email or password.";o(p),c({title:"Login Failed",message:p,type:"error"})}finally{l(!1)}};return e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#F0F7F4] to-[#E8F5E9] p-4",children:[b&&e.jsx(S,{}),e.jsxs(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-green-100",children:[e.jsxs(r.div,{className:"text-center",initial:{scale:.8},animate:{scale:1},transition:{duration:.5},children:[e.jsx(r.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(A,{className:"mx-auto h-12 w-12 text-[#8FBC8F]"})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-[#2C5530] font-montserrat",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-sm text-[#4A6D4A] font-inter",children:"Sign in to continue your eco-journey"})]}),e.jsxs(r.form,{className:"mt-8 space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},onSubmit:C,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#8FBC8F]"}),e.jsx("input",{autoComplete:"username",id:"email",type:"email",value:n,onChange:s=>y(s.target.value),className:`block w-full pl-12 pr-4 py-3 bg-green-50/50 border border-green-100 rounded-xl \r
                                             focus:ring-2 focus:ring-[#9DC88D] focus:border-transparent transition-all duration-300\r
                                             placeholder-[#4A6D4A]/50 font-inter`,placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#8FBC8F]"}),e.jsx("input",{autoComplete:"current-password",id:"password",type:"password",value:i,onChange:s=>j(s.target.value),className:`block w-full pl-12 pr-4 py-3 bg-green-50/50 border border-green-100 rounded-xl\r
                                             focus:ring-2 focus:ring-[#9DC88D] focus:border-transparent transition-all duration-300\r
                                             placeholder-[#4A6D4A]/50 font-inter`,placeholder:"Enter your password",required:!0})]})]})]}),d&&e.jsx("p",{className:"text-red-500 text-sm text-center font-inter",children:d}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(r.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsx("button",{type:"submit",disabled:u,className:`w-full flex items-center justify-center py-3 px-4 border border-transparent \r
                                         rounded-xl text-white bg-[#8FBC8F] hover:bg-[#228B22] focus:outline-none \r
                                         focus:ring-2 focus:ring-offset-2 focus:ring-[#9DC88D] transition-all \r
                                         duration-300 font-poppins disabled:opacity-50 disabled:cursor-not-allowed`,children:u?e.jsx(B,{className:"animate-spin h-5 w-5"}):"Sign in"})}),e.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[e.jsx(h,{to:"/forgot",className:`font-inter text-sm text-[#4A6D4A] hover:text-[#228B22] \r
                                         transition-colors duration-300`,children:"Forgot your password?"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or"})})]}),e.jsx(h,{to:"/register",className:`font-inter text-sm text-[#228B22] hover:text-[#8FBC8F] \r
                                         transition-colors duration-300`,children:"Don't have an account? Register now"})]})]})]})]})]})};export{q as default};
