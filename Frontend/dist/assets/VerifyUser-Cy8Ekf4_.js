import{E as u,r as l,a0 as V,A as O,j as e,C as x,aj as z,b as y}from"./index-3_z3CT1Q.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T=u("BadgeCheck",E);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],j=u("CircleUser",q);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v=u("ShieldCheck",_);function R(){const[m,N]=l.useState(["","","","","",""]),[p,g]=l.useState("request"),[d,n]=l.useState(""),[I,b]=l.useState(!1),h=l.useRef([]),w=V(),c=O(s=>s.setAlert),C=async()=>{var s,a,t,o;n("");try{const r=await y.get("http://localhost:8000/user/verifyUser",{withCredentials:!0});console.log(r.data),r.data.success?(g("verification"),c({type:"success",message:r.data.message,title:"Success"})):(n(r.data.message||"Failed to request OTP"),c({type:"error",message:r.data.message||"Failed to request OTP",title:"Error"}))}catch(r){n(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Network error"),c({type:"error",message:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Network error",title:"Error"})}},k=(s,a)=>{const t=[...m];t[s]=a,N(t),a&&s<5&&h.current[s+1].focus()},S=async s=>{var t,o,r,f;s.preventDefault();const a=m.join("");try{const i=await y.post("http://localhost:8000/user/verifyVerificationOtp",{otp:a},{withCredentials:!0});i.data.statusCode===200?(c({type:"success",message:i.data.message,title:"Success"}),b(!0),g("success"),setTimeout(()=>w("/profile"),3e3)):(n(i.data.message||"Invalid verification"),c({type:"error",message:i.data.message||"Invalid verification",title:"Error"}))}catch(i){n(((o=(t=i.response)==null?void 0:t.data)==null?void 0:o.message)||"Verification failed"),c({type:"error",message:((f=(r=i.response)==null?void 0:r.data)==null?void 0:f.message)||"Verification failed",title:"Error"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden",children:[p==="request"&&e.jsxs("div",{className:"p-8 space-y-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(j,{className:"text-green-600",size:56})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Request Verification OTP"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Click below to receive a verification code"}),d&&e.jsx("div",{className:"text-red-600 mb-4",children:d}),e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:C,className:`w-full bg-green-600 text-white py-3 rounded-xl \r
                hover:bg-green-700 transition duration-300 \r
                flex items-center justify-center space-x-2`,children:[e.jsx(z,{size:20}),e.jsx("span",{children:"Send OTP"})]})]}),p==="verification"&&e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(v,{className:"text-green-600",size:56})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800",children:"Enter Verification Code"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-6 gap-2",children:m.map((s,a)=>e.jsx("input",{type:"text",ref:t=>h.current[a]=t,maxLength:1,value:s,onChange:t=>k(a,t.target.value),className:`w-full text-center py-3 border-2 border-green-300 rounded-xl \r
                      focus:outline-none focus:ring-2 focus:ring-green-500 \r
                      text-xl font-bold tracking-wider`},a))}),d&&e.jsx("div",{className:"text-red-600 text-center",children:d}),e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:`w-full bg-green-600 text-white py-3 rounded-xl \r
                  hover:bg-green-700 transition duration-300 \r
                  flex items-center justify-center space-x-2`,children:[e.jsx(v,{size:20}),e.jsx("span",{children:"Verify OTP"})]})]})]}),p==="success"&&e.jsx("div",{className:"p-8 text-center bg-green-50",children:e.jsxs(x.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex flex-col items-center space-y-4",children:[e.jsx(T,{className:"text-green-500",size:72}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Verification Successful!"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"text-green-600",size:32}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to Dashboard..."})]})]})})]})})}export{R as default};
