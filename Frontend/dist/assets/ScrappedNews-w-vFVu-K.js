import{j as e,c as g,u as f,r as d,a as w,B as j,R as N,b}from"./index-3_z3CT1Q.js";import{h as y}from"./moment-C5S46NFB.js";import{C as h,a as m}from"./card-BYccDaG5.js";function o({className:a,...s}){return e.jsx("div",{className:g("animate-pulse rounded-md bg-primary/10",a),...s})}const v=async a=>{const s=await b.get("http://localhost:8000/scrap/scrapnews",{params:{scrap:a}});return console.log(Array.isArray(s.data.data.news.news)),s.data.data.news.news||[]};function _(){f();const[a,s]=d.useState(!1),{data:r=[],isLoading:n,isError:l,refetch:i,isFetching:c}=w({queryKey:["news",a],queryFn:()=>v(a),keepPreviousData:!0,staleTime:1e3*60*5}),u=()=>{s(!0),setTimeout(()=>{i()},4e3)},x=()=>{setTimeout(()=>{window.location.reload()},5e3)};return e.jsxs("div",{className:"container mx-auto p-4 mt-14",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Latest News"}),e.jsxs(j,{onClick:()=>{u(),x()},disabled:c,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white transition-all duration-300 disabled:opacity-50",children:[e.jsx(N,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Updating...":"Refresh News"]})]}),n&&e.jsx(k,{}),l&&e.jsx("p",{className:"text-red-500 text-lg text-center",children:"Failed to load news"}),r.length===0&&!n&&!l&&e.jsx("p",{className:"text-lg text-gray-500 text-center",children:"No news available."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((t,p)=>e.jsxs(h,{className:"group bg-white shadow-sm hover:shadow-lg transition-all duration-300 ease-in-out transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden bg-gray-50",children:[e.jsx(S,{src:t.Img.replace(/w_175/,"w_400").replace(/h_98/,"h_225"),alt:t.title}),e.jsx("span",{className:"absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded-full text-sm transition-all duration-300 group-hover:bg-blue-700",children:t.field})]}),e.jsxs(m,{className:"p-4",children:[e.jsx("a",{draggable:"false",href:t.titleLink,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("h2",{className:"text-xl font-semibold mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors duration-300 cursor-pointer hover:underline",children:t.title})}),e.jsx("p",{className:"text-gray-500 text-sm",children:y.unix(t.time).fromNow()})]})]},p))})]})}function k(){return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((a,s)=>e.jsxs(h,{className:"shadow-sm",children:[e.jsx(o,{className:"w-full h-48"}),e.jsxs(m,{className:"mt-2",children:[e.jsx(o,{className:"h-4 w-3/4 mb-2"}),e.jsx(o,{className:"h-4 w-1/2 mb-2"}),e.jsx(o,{className:"h-3 w-1/4"})]})]},s))})}function S({src:a,alt:s}){const[r,n]=d.useState(!1),[l,i]=d.useState(!1);return e.jsxs("div",{className:"relative w-full h-full",children:[!r&&!l&&e.jsx(o,{className:"absolute inset-0 w-full h-full"}),e.jsx("img",{src:l?"https://via.placeholder.com/400x225":a,alt:s,className:`w-full h-full object-cover transition-opacity duration-500 ${r?"opacity-100":"opacity-0"}`,loading:"lazy",onLoad:()=>n(!0),onError:()=>i(!0)})]})}export{_ as default};
