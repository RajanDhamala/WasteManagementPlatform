import{E as k,F as Q,r as i,a as X,j as e,G as Y,P as O,D as ee,H as se,I as te,U as ae,X as re,J as le,K as ne,N as ie,b as q}from"./index-3_z3CT1Q.js";import{E as oe}from"./EventCard-B3m37zqt.js";import{L as ce}from"./loader-circle-BqqjAk9M.js";import"./share-2-CtywzFKk.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],me=k("ArrowDownAZ",de);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],xe=k("ArrowUpAZ",ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],he=k("Filter",ue),pe=()=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((x,d)=>e.jsxs("div",{className:"animate-pulse bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})]},d))}),be=async({filter:x="all",page:d=1,limit:u=10})=>{var f,m;try{const t=await q.get(`http://localhost:8000/event/loadevents/${x}/${d}/${u}`,{withCredentials:!0});if(t.data.statusCode===200)return t.data;throw new Error(t.data.message)}catch(t){throw new Error(((m=(f=t.response)==null?void 0:f.data)==null?void 0:m.message)||"Failed to fetch events")}};function fe(){var I,$,M,L,V;const x={title:"",date:"",time:"",location:"",description:"",requiredVolunteers:"",images:[],problemStatement:""},[d,u]=i.useState(null),[f,m]=i.useState(!1),[t,h]=i.useState(x),[j,v]=i.useState(null),[R,N]=i.useState(!1),[w,E]=i.useState(!1),[S,P]=i.useState(!1),[p,_]=i.useState("all"),[o,F]=i.useState(1),T=8,C=[{value:"all",label:"All Events",icon:e.jsx(he,{size:20})},{value:"latest",label:"Latest",icon:e.jsx(me,{size:20})},{value:"oldest",label:"Oldest",icon:e.jsx(xe,{size:20})},{value:"completed",label:"Completed",icon:e.jsx(ne,{size:20})},{value:"pending",label:"Pending",icon:e.jsx(ie,{size:20})}],{data:c,isLoading:U,error:D}=X({queryKey:["events",p,o],queryFn:()=>be({filter:p,page:o,limit:T}),staleTime:1e3*60*5}),A=((I=c==null?void 0:c.data)==null?void 0:I.events)||[],b=(($=c==null?void 0:c.data)==null?void 0:$.totalPages)||1;(M=c==null?void 0:c.data)!=null&&M.totalEvents;const G=s=>{_(s),F(1),P(!1)},g=s=>{const{name:a,value:l}=s.target;h(r=>({...r,[a]:l}))},Z=s=>{const a=Array.from(s.target.files);if(!a.length)return;const l=3-t.images.length,r=a.slice(0,l);if(l<=0){d("Maximum 3 images allowed");return}h(y=>({...y,images:[...y.images,...r].slice(-3)}));const n=new FileReader;n.onloadend=()=>v(n.result),n.readAsDataURL(r[r.length-1])},B=()=>{h({...t,images:[]}),v(null)},W=s=>{s.preventDefault(),N(!0)},J=()=>{N(!1)},K=i.useCallback(s=>{s.preventDefault(),N(!1);const a=Array.from(s.dataTransfer.files).filter(r=>r.type.startsWith("image/")).slice(0,3-t.images.length);if(!a.length)return;h(r=>({...r,images:[...r.images,...a].slice(-3)}));const l=new FileReader;l.onloadend=()=>v(l.result),l.readAsDataURL(a[a.length-1])},[t.images.length]),H=async s=>{var l,r;if(s.preventDefault(),!t.images.length)return d("Please select at least one image");E(!0);const a=new FormData;Object.entries(t).forEach(([n,y])=>{n!=="images"&&a.append(n,y)}),t.images.forEach(n=>a.append("images",n));try{(await q.post("http://localhost:8000/event/eventform",a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data.statusCode===200&&(u({type:"success",message:"Event Created Successfully!",title:"Success"}),h(x),v(null),m(!1))}catch(n){u({type:"error",message:((r=(l=n.response)==null?void 0:l.data)==null?void 0:r.message)||"Error creating event",title:"Error"})}finally{E(!1)}},z=s=>{s>=1&&s<=b&&F(s)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12",children:[d&&e.jsx(Y,{...d,onClose:()=>u(null)}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Community Events"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>P(!S),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(L=C.find(s=>s.value===p))==null?void 0:L.icon,e.jsx("span",{children:(V=C.find(s=>s.value===p))==null?void 0:V.label})]}),S&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-10",children:C.map(s=>e.jsxs("button",{onClick:()=>G(s.value),className:`flex items-center gap-2 w-full px-4 py-2 text-left hover:bg-gray-50 transition-colors
                        ${p===s.value?"bg-gray-50":""}`,children:[s.icon,e.jsx("span",{children:s.label})]},s.value))})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(O,{size:20}),"Create Event"]})]})]}),U?e.jsx(pe,{}):D?e.jsx("p",{className:"text-red-500",children:D.message}):A.length===0?e.jsx("div",{className:"flex flex-col justify-center items-center text-center py-20",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"No Events Available"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"It looks like there are no events scheduled at the moment. Please check back later or create your own event to get started!"}),e.jsx("button",{className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition duration-300",onClick:()=>m(!0),children:"Create Event"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:A.map((s,a)=>e.jsx(oe,{title:s.title,date:new Date(s.date).toDateString(),location:s.location,Peoples:s.participantCount,EventImg:s.EventImg,status:s.EventStatus},s._id||a))}),b>1&&e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-8",children:[e.jsx("button",{onClick:()=>z(o-1),disabled:o===1,className:`px-4 py-2 rounded-lg transition-colors ${o===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:"Previous"}),e.jsxs("span",{className:"text-gray-700",children:["Page ",o," of ",b]}),e.jsx("button",{onClick:()=>z(o+1),disabled:o===b,className:`px-4 py-2 rounded-lg transition-colors ${o===b?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:"Next"})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] shadow-2xl transform transition-all",style:{animation:"modal-pop 0.3s ease-out"},children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 rounded-t-2xl z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Create New Event"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:"âœ•"})]}),e.jsx("p",{className:"text-green-100 mt-1",children:"Fill in the details to create a new community event"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-100px)] custom-scrollbar",children:e.jsxs("form",{onSubmit:H,className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Event Title",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:g,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"Enter a descriptive title for your event",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Date",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",name:"date",value:t.date,onChange:g,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Time",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"time",name:"time",value:t.time,onChange:g,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Location",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",name:"location",value:t.location,onChange:g,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"Enter event location",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Description",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{name:"description",value:t.description,onChange:g,rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none",placeholder:"Describe your event in detail...",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Problem Statement",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{name:"problemStatement",value:t.problemStatement,onChange:g,rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none",placeholder:"What problem will this event address?",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Required Volunteers",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"number",name:"requiredVolunteers",value:t.requiredVolunteers,onChange:g,min:"1",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all",placeholder:"Number of volunteers needed",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Event Images",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl transition-all duration-300 
                        ${R?"border-green-500 bg-green-50":"border-gray-300"} 
                        ${j?"border-solid":"hover:border-green-500 hover:bg-green-50"}`,onDragOver:W,onDragLeave:J,onDrop:K,children:[e.jsx("input",{type:"file",name:"images",onChange:Z,accept:"image/*",className:"hidden",id:"event-images",multiple:!0}),e.jsx("label",{htmlFor:"event-images",className:"flex flex-col items-center justify-center w-full min-h-[200px] cursor-pointer",children:j?e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-full h-[200px] object-cover rounded-xl"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all duration-300 rounded-xl flex items-center justify-center",children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 flex flex-col items-center gap-2",children:[e.jsx("button",{type:"button",onClick:B,className:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors",children:e.jsx(re,{size:20,className:"text-gray-600"})}),e.jsxs("p",{className:"text-white text-sm",children:["Click to ",t.images.length>=3?"change":"add more"," images (",t.images.length,"/3)"]})]})})]}):e.jsxs("div",{className:"space-y-4 text-center p-6",children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-gray-50 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(le,{className:"h-10 w-10 text-gray-400 group-hover:text-green-500 transition-colors"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base font-medium text-gray-700",children:["Drop your images here, or ",e.jsx("span",{className:"text-green-600",children:"browse"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supports: JPG, PNG, GIF, SVG, WEBP"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select up to 3 images (10MB each)"}),t.images.length>0&&e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("p",{className:"text-xs text-green-600",children:[t.images.length,"/3 images selected"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[3-t.images.length," more"," ",3-t.images.length===1?"image":"images"," can be added"]})]})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-2.5 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:`px-6 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2 ${w?"opacity-75 cursor-not-allowed":""}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Creating Event..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:20}),e.jsx("span",{children:"Create Event"})]})})]})]})})]})})]})]})}const we=Q.memo(fe);export{we as default};
